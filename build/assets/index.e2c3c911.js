var Re=Object.defineProperty,Le=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var ne=(e,a,r)=>a in e?Re(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,g=(e,a)=>{for(var r in a||(a={}))oe.call(a,r)&&ne(e,r,a[r]);if(k)for(var r of k(a))le.call(a,r)&&ne(e,r,a[r]);return e},v=(e,a)=>Le(e,De(a));var ce=(e,a)=>{var r={};for(var s in e)oe.call(e,s)&&a.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&k)for(var s of k(e))a.indexOf(s)<0&&le.call(e,s)&&(r[s]=e[s]);return r};import{c as Oe,u as I,r as o,a as W,h as ue,b as Ue,m as Be,f as Ie,P as T,R as t,W as _e,d as w,L as S,e as C,g as P,i as d,j as O,k as Pe,l as Me,w as Qe,n as Ee,A as ke,o as Ge,S as Fe,p as B,q as V,s as ze,t as pe,v as je,x as Ve,y as He,z as Je,B as We,C as Ye,D as Ze,E as Ke}from"./vendor.d1fb7507.js";const qe=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}};qe();var M=Oe();const Xe=({children:e})=>{const{pathname:a}=I();return o.exports.useEffect(()=>{window.scrollTo(0,0)},[a]),e||null},b=W.create({baseURL:"https://zeddit-backend.onrender.com/",withCredentials:!0});W.defaults.baseURL="https://zeddit-backend.onrender.com/";const _=()=>{let e;return e="https://zeddit-backend.onrender.com",e},Y=_(),$e=e=>async a=>{try{a({type:"GETTING_USER"}),b({method:"get",url:`${Y}/users/get-user/${e}`}).then(r=>{a({type:"LOGIN_SUCCESS",payload:r.data})})}catch(r){a({type:"LOGIN_FAILURE",message:r.response.data.message})}},Ae=e=>async a=>{try{a({type:"LOGIN_REQUEST"});const r=await b.post(`${Y}/users/login`,e);if(r.status!==200)throw r.data.message;a($e(e.username)),M.push("/")}catch(r){console.log(r.response),a({type:"LOGIN_FAILURE",message:r.response.data.message})}},et=(e,a,r)=>async s=>{try{let n=ue().format("MMMM Do YYYY");s({type:"REGISTER_START"}),await Ue(r==="Male"?Be:Ie,{seed:e});let l="https://api.dicebear.com/7.x/identicon/svg",c=(await b({method:"POST",url:`${Y}/users/register`,data:{username:e,password:a,gender:r,profilePicture:l,updatedAt:n},withCredentials:!0})).data;s({type:"REGISTER_SUCCESS",payload:c}),s(Ae(c))}catch(n){s({type:"REGISTER_FAILURE",message:n.response.data.message})}},tt=e=>async a=>{a({type:"LOGOUT",payload:e.username})},U=({title:e})=>t.createElement(_e,null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("title",null,e&&`${e} - Zeddit`),t.createElement("meta",{name:"description",content:"Created by Jacob Broughton, visit my github at www.github.com/jacobbroughton"}),t.createElement("meta",{property:"og:title",content:e}),t.createElement("meta",{property:"og:description",content:"Created by Jacob Broughton, visit my github at www.github.com/jacobbroughton"}),t.createElement("meta",{property:"og:type",content:"website"}));U.propTypes={title:T.string};const at=()=>{const e=w(),[a,r]=o.exports.useState(""),[s,n]=o.exports.useState(""),[l,m]=o.exports.useState("Male"),c=i=>{a===""||s===""||(e(et(a,s,l)),i.preventDefault())};return t.createElement("div",{className:"register  "},t.createElement(U,{title:"Register"}),t.createElement("div",{className:"register-container"},t.createElement("h2",null,"Register"),t.createElement("form",{onSubmit:i=>c(i)},t.createElement("input",{required:!0,className:"register-input",placeholder:"Username",onChange:i=>r(i.target.value)}),t.createElement("input",{required:!0,className:"register-input",type:"password",placeholder:"Password",onChange:i=>n(i.target.value)}),t.createElement("select",{required:!0,type:"text",placeholder:"Male / Female",onChange:i=>m(i.target.value)},t.createElement("option",null,"Male"),t.createElement("option",null,"Female")),t.createElement("input",{className:"register-submit",type:"submit",value:"Register",disabled:s===""||a===""})),t.createElement("p",{className:"already-registered-question"},"Already registered?"," ",t.createElement(S,{className:"sign-in-link",to:"/login"},"Sign In"))))};const rt=()=>{const[e,a]=o.exports.useState(""),[r,s]=o.exports.useState(""),n=w(),l=m=>{e===""||r===""||(n(Ae({username:e,password:r})),m.preventDefault())};return t.createElement("div",{className:"login"},t.createElement(U,{title:"Log in"}),t.createElement("div",{className:"login-container"},t.createElement("h2",null,"Login"),t.createElement("form",{onSubmit:m=>l(m)},t.createElement("input",{required:!0,type:"text",className:"login-input",placeholder:"Username",onChange:m=>a(m.target.value)}),t.createElement("input",{required:!0,type:"password",className:"login-input",placeholder:"Password",onChange:m=>s(m.target.value)}),t.createElement("input",{className:"login-submit",type:"submit",value:"Login",disabled:e===""||r===""})),t.createElement("p",{className:"need-to-register-question"},"Not registered?"," ",t.createElement(S,{className:"create-account-link",to:"/register"},"Create an account"))))},me=(e,a)=>{const r=JSON.stringify(e);localStorage.setItem(a,r)},Z=e=>{try{const a=localStorage.getItem(e);return a===null?void 0:JSON.parse(a)}catch{return}},st=(e=Z("themeState")||!1,a)=>{switch(a.type){case"TOGGLE_DARK_MODE":return!e;default:return e}},nt=()=>async e=>{e({type:"TOGGLE_DARK_MODE"})},ot=_(),ge=e=>async a=>{try{if(a({type:"SET_CURRENT_SUBREDDIT_REQUEST"}),e){let r=await b.get(`${ot}/subreddits/${e}`);if(r.status!==200)throw r.data.message;let s=r.data===""?null:r.data;s=v(g({},s),{name:C.decode(s.name),description:C.decode(s.description)}),a({type:"SET_CURRENT_SUBREDDIT_SUCCESS",payload:s})}else a({type:"SET_CURRENT_SUBREDDIT_SUCCESS",payload:null})}catch(r){a({type:"SET_CURRENT_SUBREDDIT_FAILURE",message:r.response.data.message})}},lt=e=>o.exports.createElement("svg",g({viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",width:"1em",height:"1em"},e),o.exports.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}));const K=({size:e,source:a})=>t.createElement("img",{className:`profile-picture ${e}`,src:a,alt:"Profile picture"});K.propTypes={source:T.string,size:T.string};const ct=e=>o.exports.createElement("svg",g({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",style:{enableBackground:"new 0 0 56.966 56.966"},xmlSpace:"preserve",width:"1em",height:"1em"},e),o.exports.createElement("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23 s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92 c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17 s-17-7.626-17-17S14.61,6,23.984,6z"}),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null)),mt=e=>o.exports.createElement("svg",g({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 447.243 447.243",style:{enableBackground:"new 0 0 447.243 447.243"},width:"1em",height:"1em"},e),o.exports.createElement("g",null,o.exports.createElement("g",null,o.exports.createElement("path",{d:"M420.361,192.229c-1.83-0.297-3.682-0.434-5.535-0.41H99.305l6.88-3.2c6.725-3.183,12.843-7.515,18.08-12.8l88.48-88.48 c11.653-11.124,13.611-29.019,4.64-42.4c-10.441-14.259-30.464-17.355-44.724-6.914c-1.152,0.844-2.247,1.764-3.276,2.754 l-160,160C-3.119,213.269-3.13,233.53,9.36,246.034c0.008,0.008,0.017,0.017,0.025,0.025l160,160 c12.514,12.479,32.775,12.451,45.255-0.063c0.982-0.985,1.899-2.033,2.745-3.137c8.971-13.381,7.013-31.276-4.64-42.4 l-88.32-88.64c-4.695-4.7-10.093-8.641-16-11.68l-9.6-4.32h314.24c16.347,0.607,30.689-10.812,33.76-26.88 C449.654,211.494,437.806,195.059,420.361,192.229z"})))),Se=(e,a,r)=>async s=>{try{s({type:"SEARCH_REQUEST"});const n=await W.get(`/search${e?`?userId=${e}`:""}${a?`${e?"&":"?"}subredditName=${a}`:""}${!e&&!a?"?":"&"}q=${r}`);if(n.status!==200)throw n.data.message;s({type:"GET_POSTS_SUCCESS",payload:n.data})}catch(n){console.log(n),s({type:"SEARCH_FAILURE",message:n.response.data.message})}},ie=()=>{const{innerWidth:e,innerHeight:a}=window;return{width:e,height:a}},q=()=>{const[e,a]=o.exports.useState(ie());return o.exports.useEffect(()=>{function r(){a(ie())}return window.addEventListener("resize",()=>r()),()=>window.removeEventListener("resize",()=>r())},[]),e},he=({searchExpanded:e,setSearchExpanded:a})=>{const{width:r}=q(),s=o.exports.useRef(),n=w(),l=P(),m=I(),c=d(u=>u.auth.user),i=d(u=>u.currentSubreddit),A=d(u=>u.post),[E,p]=o.exports.useState(""),[N,f]=o.exports.useState(!1);o.exports.useEffect(()=>{r<=767?f(!0):(f(!1),a(!1))},[r]);const L=(u,h)=>{p(u),n(Se(c==null?void 0:c.id,h,u)),console.log(m),A?i?l.push(`/r/${i.name}?q=${u}`):l.push(`/?q=${u}`):l.push(`${m.pathname}?q=${u}`)},x=async u=>{if(u.preventDefault(),E===""){l.push({search:""});return}L(E,i==null?void 0:i.name),N&&s.current.blur()};return t.createElement("div",{className:"search-bar  "},t.createElement(O.button,{className:"search-icon-button",onClick:N?()=>a(!e):void 0,whileTap:N?{scale:1.2}:{scale:1}},e?t.createElement(mt,{className:"search-icon"}):t.createElement(ct,{className:"search-icon"})),N&&e?t.createElement("div",{className:"mobile-search"},t.createElement("form",{onSubmit:u=>x(u),className:"search-form"},t.createElement("input",{ref:s,onChange:u=>p(u.target.value),type:"text",value:E,className:"search-input",placeholder:`Search ${i?`in ${i.name}`:""}`}))):t.createElement("div",{className:"desktop-search"},i&&t.createElement("label",{className:"search-label"},"r/",C.decode(i.name)),t.createElement("form",{onSubmit:u=>x(u),className:"search-form"},t.createElement("input",{onChange:u=>p(u.target.value),type:"text",value:E,className:"search-input",placeholder:"Search"}))))};he.propTypes={searchExpanded:T.bool,setSearchExpanded:T.func};var it="data:image/png;base64,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",dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAEAQAAABQ8GUWAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAAAGAAAABgAPBrQs8AAAAHdElNRQflCgsCFRQ5B1k2AAADxElEQVR42u3aT0iTYRwH8N/zOJ0ISgPLmSl5cCwVooNISQfLUwctFcSSDooEMg8VdNlB9KRQF6VLppfhn4mpLAjFFIv87yFBI+c/UvTVmRLT6dR3ezqIQrTN9333vs+jc1/Yac94v98P7A/bAChnOj8sbO2BwcBNjI5y8zs73PzODvdmeJj7WVY2nR8WRrsP1djMWi1nGxvjOEI83iZGR21mrZZmJ0TrQuufY2Lct/v7wZ6c7LNQhdWq4jIzoz+urgYMgNDxLBAUBxA7njaCogBSx9NEUAzA3/G0EBQBkGs8DQTZAeQerzSCrABKjVcSQTYApccrhSALAK3xSiD4DUB7vNwIfgGwGi8ngmQA1uPlQpAEcFbGy4EgGuCsjfcXQRTAWR3vD4JggLM+XiqCIIDzMl4KwqkA5228WASfAOd1vBgErwDnfbxQBI8AgTJeCMJ/AIE2/jSEfwACdbwvhBOAQB/vDQEDHP1iQ14MDAT6eAAAUqnT8b/6+o5/gcKzBrXalWmxkB69nnU5agg9er1L1dVF3KGhOHKhtBRcaWmsS1HPnfT0NV1xccjLlro6iIqLY92HRdCeRoNBk5LCugirkIPUVMy6BMsgJyEYvk9NsS7CLFHT0xiVmkyse7AKaTWZ8Oa9+npYGRtjXYZ6mkdGtNbGRpzSfnCA/2Rnw7OhIdadaAW9HRxEqTk5CB8ennwUJgRjrqOwEC0WFKB+nQ42IiKIJT6edVlZBmcvL8O+w0Gezs6SRLM5NrelBSG3G8DH9wEbd5OS+DarlXV5ORLyNSnpSsHcnKf7LvTbYBAgCBAEABX1KzbwPJrc3vZ0F7kZGQklKqqdqF0M5W9twReDYc/Y2ZmInE5PZxbbwsPVHXl5uLWujtRqNAEF4E4uKbmq6urydeYIpqmJy3U6AdrbafSi8xpgtttj31ksQo9rP3R2gtluDxgAVLWycvzJS9B55HajRjp/lr7w7wJBANYFWCcIwLoA6wQBWBdgnSAA6wKs4xXA+XB3l3U5uYJmHQ7RANeer68j/d4e6/J+Z9fhiDbabKIBEOZ5qO7pYd3f36BH3d0IuVyiAQAA0OuaGuAIYT1CcjhCSFtNja8jPgFi5kdG4El1NesdknOrqipWPz4uGQAAQPvDaIRPFRXQwPNSe5BN789Br7m0sSF5eAPPoxCjUQuVlacdFfxnaS70xg10ubycZGRlod8JCaRZrRb0wG8LC3ixqCjm1fCwmA0ruxkZeNJkguuJiULOo8f7+yR6aQne9/a6J2pr4+7PzAh53F8Pn1IGs7zPwwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0xMC0xMVQwMjoyMToyMCswMDowMMLKA28AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMTAtMTFUMDI6MjE6MjArMDA6MDCzl7vTAAAAAElFTkSuQmCC";const ut=()=>{const e=w(),a=d(p=>p.auth.user),r=d(p=>p.theme),[s,n]=o.exports.useState(!1),[l,m]=o.exports.useState(!1),[c,i]=o.exports.useState(!1),{width:A}=q(),E=()=>{m(!l),n(!s)};return t.createElement("nav",{className:"nav"},t.createElement("div",{className:"nav-container"},t.createElement("div",{className:"home-search-darkicon"},!c&&t.createElement(S,{className:"nav-home-link",onClick:()=>e(ge(null)),to:"/"},A>=767?"Zeddit":t.createElement("img",{className:"home-icon",src:r?dt:it})),t.createElement(he,{setSearchExpanded:i,searchExpanded:c}),!c&&t.createElement(O.button,{className:"dark-mode-icon-parent",onClick:()=>e(nt()),whileTap:{scale:1.25}},r?"\u{1F319}":"\u2600\uFE0F")),t.createElement("div",{className:"nav-menu"},a?t.createElement(t.Fragment,null,l&&t.createElement("div",{onClick:()=>E(),className:"overlay"}),t.createElement("div",{className:"logged-in-nav-view"},t.createElement("button",{onClick:()=>{m(!l),n(!s)},className:"nav-username-button"},t.createElement(K,{size:"small",source:a.profile_picture}),t.createElement("span",{className:"nav-username-span"},a.username," "),t.createElement(lt,{className:"down-arrow"})),t.createElement("div",{className:`${s?"user-dropdown open":"user-dropdown closed"}`},t.createElement(S,{className:"dropdown-link",onClick:()=>E(),to:"/"},"Home"),t.createElement(S,{className:"dropdown-link",onClick:()=>E(),to:"/new-post?type=text"},"New Text Post"),t.createElement(S,{className:"dropdown-link",onClick:()=>E(),to:"/new-post?type=link"},"New Link Post"),t.createElement(S,{className:"dropdown-link",onClick:()=>E(),to:"/subreddits/create"},"Create Subreddit"),t.createElement("button",{className:"logout-button",onClick:()=>{e(tt(a)),E()}},"Logout")))):t.createElement("div",{className:"logged-out-nav-view"},t.createElement(S,{to:"/login"},"Login"),t.createElement(S,{to:"/register"},"Register")))))};const Et=()=>t.createElement("footer",null,t.createElement("div",{className:"container"},t.createElement("p",{className:"created-by"},"Created by Jacob Broughton"),t.createElement("p",{className:"github"},"Feel free to visit my"," ",t.createElement("a",{href:"https://github.com/jacobbroughton"},"Github"))));const F=_(),pt=(e,a)=>async r=>{try{r({type:"GET_POST_REQUEST"});const s=await b.get(`${F}/posts/single/${e}/${a||""}`);if(s.status!==200)throw s.data.message;let n=s.data;n=v(g({},n),{title:C.decode(n.title),body:C.decode(n.body)}),r({type:"GET_POST_SUCCESS",payload:n})}catch(s){r({type:"GET_POST_FAILURE",message:s.response.data.message})}},X=e=>async a=>{try{a({type:"SET_POST_REQUEST"}),console.log(e),e&&(e=v(g({},e),{title:C.decode(e.title),body:C.decode(e.body)})),a({type:"SET_POST_SUCCESS",payload:e})}catch(r){a({type:"SET_POST_FAILURE",message:r.response.data.message})}},At=(e,a,r)=>async s=>{try{s({type:"SINGLE_POST_VOTE_REQUEST"});let n={userId:e,postId:a,value:r};console.log(r);const l=await b.post(`${F}/votes/post`,{data:n});if(l.status!==200)throw l.data.message;s({type:"SINGLEPOST_VOTE_SUCCESS",payload:n})}catch(n){console.log(n),s({type:"SINGLE_POST_VOTE_FAILURE"})}},gt=(e,a)=>({type:"EDIT_POST",id:e,updates:a}),St=({id:e,body:a})=>async r=>{try{r({type:"EDIT_POST_REQUEST"});const s=await b.put(`${F}/posts/single/${e}`,{body:a});if(s.status!==200)throw s.data.message;r(gt(e,{body:a})),r({type:"EDIT_POST_SUCCESS"})}catch(s){r({type:"EDIT_POST_FAILURE",message:s.response.data.message})}},ht=(e,a)=>async r=>{try{r({type:"DELETE_POST_REQUEST"});const s=await b.delete(`${F}/posts`,{data:{id:a}});if(s.status!==200)throw s.data.message;r({type:"DELETE_POST_SUCCESS",payload:{id:a}})}catch(s){r({type:"DELETE_POST_FAILURE",message:s.response.data.message})}},$=_(),yt=(e,a)=>async r=>{try{r({type:"GET_POSTS_REQUEST"});let s=await b.get(`${$}/posts`,{params:{userId:e,filters:a}});if(s.status!==200)throw s.data.message;r({type:"GET_POSTS_SUCCESS",payload:s.data})}catch(s){console.log(s),r({type:"GET_POSTS_FAILURE",message:s.response.data.message})}},Ct=(e,a,r)=>async s=>{try{s({type:"POST_VOTE_REQUEST"});let n={userId:e,postId:a,value:r};console.log(n);const l=await b.post(`${$}/votes/post`,{data:n});if(l.status!==200)throw l.data.message;s({type:"POST_VOTE_SUCCESS",payload:n})}catch(n){console.log(n),s({type:"POST_VOTE_FAILURE",message:n.response.data.message})}},Tt=({postType:e,title:a,body:r,authorId:s,subredditId:n,subredditName:l})=>async m=>{try{m({type:"CREATE_POST_REQUEST"});let c=Pe(new Date);const i={postType:e,title:a,body:r,authorId:s,subredditId:n,subredditName:l},A=await b.post(`${$}/posts`,i);if(A.status!==200)throw A.data.message;let E=A.data.insertId;m(X({id:E,post_type:e,title:a,body:r,vote_count:0,author_id:s,subreddit_id:n,subreddit_name:l,created_at:c,updated_at:c})),M.push(`/r/${i.subredditName.replace(/\s+/g,"-")}/${E}`)}catch(c){m({type:"CREATE_POST_FAILURE",message:c.response.data.message})}},ee=()=>{const e=I();return new URLSearchParams(e.search).get("q")},ye=e=>o.exports.createElement("svg",g({viewBox:"0 0 24 24",width:"1em",focusable:"false","aria-hidden":"true",height:"1em"},e),o.exports.createElement("g",{fill:"none",strokeLinecap:"round",strokeWidth:2},o.exports.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),o.exports.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))),Ce=e=>o.exports.createElement("svg",g({viewBox:"0 0 24 24",focusable:"false","aria-hidden":"true",width:"1em",height:"1em"},e),o.exports.createElement("g",{stroke:"none"},o.exports.createElement("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"}))),Te=e=>{const a=e.split(/[- :]/),r=new Date(Date.UTC(a[0],a[1]-1,a[2],a[3],a[4],a[5]));let s=Me(r,{addSuffix:!0}),n=s.match(/\d+/g);return parseInt(n)<=10&&s.includes("seconds")&&(s="a few seconds ago"),s};const bt=e=>o.exports.createElement("svg",g({x:"0px",y:"0px",width:"1em",height:"1em",viewBox:"0 0 292.362 292.361"},e),o.exports.createElement("g",null,o.exports.createElement("path",{d:"M286.935,197.287L159.028,69.381c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.287 C1.807,200.904,0,205.186,0,210.134s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.425,12.85,5.425h255.813 c4.949,0,9.233-1.808,12.848-5.425c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.904,286.935,197.287z"})),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null)),vt=e=>o.exports.createElement("svg",g({x:"0px",y:"0px",width:"1em",height:"1em",viewBox:"0 0 123.959 123.958"},e),o.exports.createElement("g",null,o.exports.createElement("path",{d:"M117.979,28.017h-112c-5.3,0-8,6.4-4.2,10.2l56,56c2.3,2.3,6.1,2.3,8.401,0l56-56 C125.979,34.417,123.279,28.017,117.979,28.017z"})),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null)),te=({item:e,handleVoteClick:a})=>{const r=d(s=>s.auth.user);return t.createElement("div",{className:"votes-section  "},t.createElement(O.button,{onClick:()=>a(1),className:"up-vote",whileTap:r?{scale:1.4}:{scale:1}},t.createElement(bt,{className:`${r&&e.has_voted===1?"selected":""} up-arrow`})),t.createElement("span",{className:"votes-count"},e.vote_count&&e.vote_count),t.createElement(O.button,{onClick:()=>a(-1),className:"down-vote",whileTap:r?{scale:1.4}:{scale:1}},t.createElement(vt,{className:`${r&&e.has_voted===-1?"selected":""} down-arrow`})))};te.propTypes={item:T.object,handleVoteClick:T.func};const ae=({post:e,single:a})=>{const r=w(),s=P(),n=d(u=>u.auth.user),l=d(u=>u.currentSubreddit),[m,c]=o.exports.useState(!1),[i,A]=o.exports.useState(e?e.body:""),[E,p]=o.exports.useState(null),N=Te(e.created_at),f=(u,h)=>{r(St({id:h,body:i})),c(!m),u.preventDefault()},L=()=>{r(ht(e,e.id)),a&&s.push(l?`/r/${l.name}`:"/")},x=u=>{if(!n){p("You must log in to vote"),setTimeout(()=>p(null),4e3);return}r(a?At(n.id,e.id,u):Ct(n.id,e.id,u))};return t.createElement(O.div,{className:"post",initial:a?{opacity:1}:{opacity:0},animate:{opacity:1},edit:a?{opacity:1}:{opacity:0}},a&&t.createElement(U,{title:e.title}),t.createElement(te,{item:e,handleVoteClick:x}),t.createElement("div",{className:"post-main-section"},E&&t.createElement("p",{className:"vote-error"},E),t.createElement("p",{className:"post-metadata"},t.createElement(S,{to:`/r/${C.decode(e.subreddit_name)}`,className:"post-subreddit-link"},"r/",C.decode(e.subreddit_name)),t.createElement("span",{className:"posted-by-span"},"Posted by ",t.createElement("span",{className:"user"},"u/",e.username&&e.username)),t.createElement("span",{className:"time-ago-span"},N)),e.post_type==="link"?t.createElement("a",{className:"link-title",href:e.body},C.decode(e.title)):t.createElement("div",{className:"title-and-body"},t.createElement(S,{to:`/r/${C.decode(e.subreddit_name.replace(/\s+/g,"-"))}/${e.id}`,className:"post-title",onClick:()=>r(X(e))},C.decode(e.title)),t.createElement("div",{className:"post-body"},n&&n.id===e.author_id&&m?t.createElement("form",{className:"edit-post-form",onSubmit:u=>{f(u,e.id)}},t.createElement("textarea",{value:i,onChange:u=>A(u.target.value)}),t.createElement("div",{className:"save-and-cancel"},t.createElement("button",{disabled:e.body===i,type:"submit"},"Save"),t.createElement("button",{onClick:()=>c(!m)},"Cancel"))):t.createElement("p",{className:"post-body-text"},C.decode(e.body)))),n&&n.id===e.author_id&&t.createElement("div",{className:"posted-user-accessable-options"},!m&&t.createElement("button",{onClick:()=>c(!m)},t.createElement(ye,{className:"edit-icon"}),"Edit"),t.createElement("button",{onClick:()=>L()},t.createElement(Ce,{className:"delete-icon"}),"Delete"))))};ae.propTypes={post:T.object,single:T.bool};const be=()=>{const e=P(),a=d(i=>i.subreddits),r=d(i=>i.currentSubreddit),s=a.filter(i=>i.user_id===1),n=a.filter(i=>i.user_id!==1);s.unshift({name:"Home"});const[l,m]=o.exports.useState([]);o.exports.useEffect(()=>{m([{type:"General",includedSubreddits:s},{type:"User Created",includedSubreddits:n}])},[a]);const c=i=>{i.target.value==="Home"?e.push("/"):e.push(`/r/${i.target.value}`)};return l?t.createElement("div",{className:"mobile-subreddit-selector  "},t.createElement("label",null,"Select a subreddit"),t.createElement("select",{value:r?r.name:"Home",label:"Select a subreddit",onChange:i=>c(i),className:"subreddits"},l.map((i,A)=>t.createElement("optgroup",{label:i.type,key:A},i.includedSubreddits.map((E,p)=>t.createElement("option",{key:p},C.decode(E.name))))))):t.createElement("p",null,"Loading")};const z=_(),wt=()=>async e=>{try{e({type:"GET_SUBREDDITS_REQUEST"});const a=await b.get(`${z}/subreddits`);if(a.status!==200)throw a.data.message;e({type:"GET_SUBREDDITS_SUCCESS",payload:a.data})}catch(a){e({type:"GET_SUBREDDITS_FAILURE",message:a.response.data.message})}},Nt=e=>async a=>{try{a({type:"GET_SINGLE_SUBREDDIT_REQUEST"});const r=await b.get(`${z}/subreddits/${e}`);if(r.status!==200)throw r.data.message;a({type:"GET_SINGLE_SUBREDDIT_SUCCESS",payload:r})}catch(r){a({type:"GET_SINGLE_SUBREDDIT_FAILURE",message:r.response.data.message})}},ft=(e,a,r)=>async s=>{try{s({type:"CREATE_SUBREDDIT_REQUEST"});let n=ue().format("MMMM Do YYYY"),l={id:0,userId:e,name:a,description:r,createdAt:n};const m=await b.post(`${z}/subreddits`,l);if(m.status!==200)throw m.data.message;l.id=m.data.idForNewSubreddit,s({type:"CREATE_SUBREDDIT_SUCCESS",payload:l}),s(Nt(l.name)),M.push(`/r/${l.name}/`)}catch(n){s({type:"CREATE_SUBREDDIT_FAILURE",message:n.response.data.message})}},xt=(e,a)=>async r=>{try{r({type:"DELETE_SUBREDDIT_REQUEST"});const s=await b.delete(`${z}/subreddits/${a}/${e}`);if(s.status!==200)throw s.data.message;M.push("/"),r({type:"DELETE_SUBREDDIT_SUCCESS",payload:a})}catch(s){r({type:"DELETE_SUBREDDIT_FAILURE",message:s.response.data.message})}},ve=({name:e})=>{const a=I(),r=w(),s=d(p=>p.currentSubreddit),n=d(p=>p.auth.user),[l,m]=o.exports.useState(!1),[c,i]=o.exports.useState(""),A=()=>{r(xt(n.id,s.id)),m(!1)};o.exports.useEffect(()=>{m(!1)},[s]);const E=ee();return o.exports.useEffect(()=>{i(E)},[a]),t.createElement("section",{className:"current-subreddit-banner"},e?t.createElement("div",{className:"current-subreddit-banner-stack"},t.createElement("h1",null,s?t.createElement(t.Fragment,null,t.createElement("span",{className:"rSpan"},"r/"),C.decode(s.name)):"Home"," "),c&&t.createElement("p",{className:"search-value"},t.createElement("span",null,"Search: "),c),n&&s&&(s==null?void 0:s.user_id)===(n==null?void 0:n.id)&&(l?t.createElement("span",{className:"delete-confirmation-span"},"Are you sure?",t.createElement("button",{onClick:()=>A()},"Yes"),t.createElement("button",{onClick:()=>m(!1)},"No")):t.createElement("button",{className:"delete-btn",onClick:()=>m(!0)},"Delete Subreddit"))):t.createElement("div",{className:"current-subreddit-banner-stack"},t.createElement("h1",null,"Home"),c&&t.createElement("p",{className:"search-value"},t.createElement("span",null,"Search: "),c)))};ve.propTypes={name:T.string};const we=()=>t.createElement("div",{className:"loading"},t.createElement("div",{className:"one"}),t.createElement("div",{className:"two"}),t.createElement("div",{className:"three"}));const Ne=({user:e})=>t.createElement("div",{className:"no-posts-prompt"},t.createElement("h3",null,"It's quiet in here...\u{1F634}"),e?t.createElement("p",null,"Create a new ",t.createElement(S,{to:"/new-post?type=text"},"text")," or"," ",t.createElement(S,{to:"/new-post?type=link"},"link")," post to get a conversation started."):t.createElement("p",null,t.createElement(S,{to:"/login"},"Sign In")," or"," ",t.createElement(S,{to:"/register"},"Register")," to get a new conversation started."));Ne.propTypes={user:T.object};const Rt=()=>{const e=w(),a=ee(),r=d(c=>c.auth.user),s=d(c=>c.postList),n=d(c=>c.loading),l=d(c=>c.post);d(c=>c.error);const{name:m}=Ee();return o.exports.useEffect(()=>{l&&e(X(null))},[]),o.exports.useEffect(()=>{e(ge(m||null)),e(a?Se(r==null?void 0:r.id,m,a):yt(r?r.id:null,m||null))},[a,m,r]),t.createElement("div",{className:"post-list-main  "},t.createElement(be,null),t.createElement(ve,{name:m,user:r}),n?t.createElement(we,null):t.createElement(t.Fragment,null,t.createElement("div",{className:"post-list-container"},t.createElement("div",{className:"post-list"},t.createElement(t.Fragment,null,s.length>0?s.map((c,i)=>t.createElement(ae,{post:c,key:i})):t.createElement(Ne,{user:r}))))))};var de=Qe(Rt);const Lt=()=>{const e=w(),a=I().search,r=d(h=>h.auth),s=d(h=>h.subreddits),n=d(h=>h.currentSubreddit),[l,m]=o.exports.useState(new URLSearchParams(a).get("type")),[c,i]=o.exports.useState(""),[A,E]=o.exports.useState(""),[p,N]=o.exports.useState(""),[f,L]=o.exports.useState(null),x=h=>{console.log(l);const y={postType:l,title:c,body:l==="text"?A:p,authorId:r.user.id,subredditId:f.id,subredditName:f.name};console.log(y),e(Tt(y)),h.preventDefault()};o.exports.useEffect(()=>{m(new URLSearchParams(a).get("type"))},[a]),o.exports.useEffect(()=>{l==="Text"&&N("")},[l]),o.exports.useEffect(()=>{s.length>0&&L(n&&n)},[s,n]);const u=h=>{console.log(h),console.log(s),L(s.filter(y=>C.decode(y.name)===h)[0])};return t.createElement("div",{className:"new-post"},t.createElement(U,{title:`Create a new ${l} post`}),t.createElement("div",{className:"new-post-container"},t.createElement("form",{onSubmit:h=>x(h)},t.createElement("div",{className:"both-radio-inputs"},t.createElement("div",{className:"post-type-buttons"},t.createElement(S,{to:"/new-post?type=text",className:`post-type-button ${l==="text"?"clicked":""}`,value:"text",type:"button"},"Text"),t.createElement(S,{to:"/new-post?type=link",className:`post-type-button  ${l==="link"?"clicked":""}`,value:"link",type:"button"},"Link"))),t.createElement("input",{className:"new-post-input",placeholder:"Title (required)",onChange:h=>i(h.target.value)}),l==="text"?t.createElement(t.Fragment,null,t.createElement("textarea",{className:"new-post-input",placeholder:"Text (optional)",onChange:h=>E(h.target.value)})):t.createElement(t.Fragment,null,t.createElement("input",{type:"url",className:"new-post-input",placeholder:"URL (required)",onChange:h=>N(h.target.value)})),t.createElement("select",{defaultValue:n&&n.name,onChange:h=>u(h.target.value)},t.createElement("option",{disabled:!0,selected:!0,value:!0}," ","Select a subreddit"," "),s.map((h,y)=>t.createElement("option",{key:y},C.decode(h.name)))),t.createElement("button",{disabled:c===""||!f,className:"new-post-submit",type:"submit"},"Submit"))))};const Q=_(),Dt=({body:e,author_id:a,post_id:r,parent_comment:s,username:n,profile_picture:l})=>async m=>{try{m({type:"ADD_COMMENT_REQUEST"});let c={body:e,author_id:a,post_id:r,parent_comment:s,username:n,profile_picture:l},i=new Date().toISOString(),A=`${i.substr(0,10)} ${i.substr(11,8)}`;e=C.encode(e);const E=await b.post(`${Q}/comments`,c);if(E.status!==200)throw E.data.message;c=v(g({},c),{id:E.data.insertId,threadToggle:!0,created_at:A,updated_at:A,vote_count:0}),m({type:"ADD_COMMENT_SUCCESS",payload:c})}catch(c){m({type:"ADD_COMMENT_FAILURE",message:c.response.data.message})}},Ot=(e,a)=>async r=>{r({type:"TOGGLE_COMMENT_THREAD",payload:{id:e,threadToggle:a}})},Ut=(e,a,r)=>async s=>{try{s({type:"COMMENT_VOTE_REQUEST"});let n={userId:e,commentId:a,value:r};const l=await b.post(`${Q}/votes/comment`,{data:n});if(l.status!==200)throw l.data.message;s({type:"COMMENT_VOTE_SUCCESS",payload:n})}catch(n){s({type:"COMMENT_VOTE_FAILURE",message:n.response.data.message})}},Bt=(e,a)=>({type:"EDIT_COMMENT",id:e,updates:a}),It=({id:e,body:a})=>async r=>{try{r({type:"EDIT_COMMENT_REQUEST"});const s=await b.put(`${Q}/comments/${e}`,{body:a});if(s.status!==200)throw s.data.message;a=C.encode(a),r(Bt(e,{body:a})),r({type:"EDIT_COMMENT_SUCCESS"})}catch(s){r({type:"EDIT_COMMENT_FAILURE",message:s.response.data.message})}},_t=(e,a)=>async r=>{try{r({type:"GET_COMMENTS_REQUEST"});const s=await b.get(`${Q}/comments/${e}${a?`?userId=${a}`:""}`);if(s.status!==200)throw s.data.message;let n=s.data.map(l=>v(g({},l),{threadToggle:!0}));r({type:"GET_COMMENTS_SUCCESS",payload:n})}catch(s){r({type:"GET_COMMENTS_FAILURE",message:s.response.data.message})}},Pt=e=>async a=>{try{a({type:"DELETE_COMMENT_REQUEST"});const r=await b.delete(`${Q}/comments`,{data:{id:e}});if(r.status!==200)throw r.data.message;a({type:"DELETE_COMMENT_SUCCESS",payload:{id:e}})}catch(r){a({type:"DELETE_COMMENT_FAILURE",message:r.response.data.message})}},Mt=()=>async e=>{e({type:"RESET_COMMENTS"})};const re=({post:e,parentComment:a,setToggleCommentReply:r,alwaysOpen:s})=>{const n=w(),l=d(A=>A.auth.user),[m,c]=o.exports.useState(""),i=A=>{let E={body:m,author_id:l.id,post_id:e.id,parent_comment:a,username:l.username,profile_picture:l.profile_picture};n(Dt(E)),c(""),A.preventDefault()};return t.createElement("div",{className:"user-comment"},t.createElement("p",null,s?"Comment as ":"Reply as ",t.createElement("span",null,l.username)," "),t.createElement("form",{onSubmit:A=>i(A)},t.createElement("textarea",{value:m,onChange:A=>c(A.target.value),placeholder:s?"What are your thoughts?":"Your thoughts?"}),t.createElement("button",{className:"comment-button",type:"submit",disabled:m.length===0},"Comment"),!s&&t.createElement("button",{className:"cancel-button",onClick:()=>r()},"Cancel")))};re.propTypes={post:T.object,parentComment:T.number,setToggleCommentReply:T.func,alwaysOpen:T.bool};const Qt=e=>o.exports.createElement("svg",g({viewBox:"0 0 14 14",focusable:"false",width:"1em",height:"1em"},e),o.exports.createElement("path",{fill:"currentColor",d:"M0.913134,0.920639 C1.49851,0.331726 2.29348,0 3.12342,0 L10.8766,0 C11.7065,0 12.5015,0.331725 13.0869,0.920639 C13.6721,1.50939 14,2.30689 14,3.13746 L14,8.12943 C13.9962,8.51443 13.9059,8.97125 13.7629,9.32852 C13.6128,9.683 13.3552,10.0709 13.0869,10.3462 C12.813,10.6163 12.4265,10.8761 12.0734,11.0274 C11.7172,11.1716 11.2607,11.263 10.8766,11.2669 L10.1234,11.2669 L10.1234,12.5676 L10.1209,12.5676 C10.1204,12.793 10.0633,13.0791 9.97807,13.262 C9.8627,13.466 9.61158,13.7198 9.40818,13.8382 L9.40824,13.8383 C9.4077,13.8386 9.40716,13.8388 9.40661,13.8391 C9.40621,13.8393 9.4058,13.8396 9.40539,13.8398 L9.40535,13.8397 C9.22958,13.9254 8.94505,13.9951 8.75059,14 L8.74789,14 C8.35724,13.9963 7.98473,13.8383 7.71035,13.5617 L5.39553,11.2669 L3.12342,11.2669 C2.29348,11.2669 1.49851,10.9352 0.913134,10.3462 C0.644826,10.0709 0.387187,9.683 0.23711,9.32852 C0.0941235,8.97125 0.00379528,8.51443 0,8.12943 L0,3.13746 C0,2.30689 0.327915,1.50939 0.913134,0.920639 Z M3.12342,1.59494 C2.71959,1.59494 2.33133,1.75628 2.04431,2.04503 C1.75713,2.33395 1.59494,2.72681 1.59494,3.13746 L1.59494,8.12943 C1.59114,8.35901 1.62114,8.51076 1.71193,8.72129 C1.79563,8.9346 1.88065,9.06264 2.04431,9.22185 C2.33133,9.5106 2.71959,9.67195 3.12342,9.67195 L5.72383,9.67195 C5.93413,9.67195 6.13592,9.75502 6.28527,9.90308 L8.52848,12.1269 L8.52848,10.4694 C8.52848,10.029 8.88552,9.67195 9.32595,9.67195 L10.8766,9.67195 C11.1034,9.67583 11.2517,9.64614 11.4599,9.55518 C11.6712,9.47132 11.7976,9.38635 11.9557,9.22185 C12.1193,9.06264 12.2044,8.9346 12.2881,8.72129 C12.3789,8.51076 12.4089,8.35901 12.4051,8.12943 L12.4051,3.13746 C12.4051,2.72681 12.2429,2.33394 11.9557,2.04503 C11.6687,1.75628 11.2804,1.59494 10.8766,1.59494 L3.12342,1.59494 Z"})),kt=e=>o.exports.createElement("svg",g({id:"Capa_1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o.exports.createElement("g",null,o.exports.createElement("g",null,o.exports.createElement("path",{d:"M486.396,336.393l-43.184,43.184L339.193,275.544c-5.856-5.856-15.349-5.862-21.211,0l-42.437,42.437 c-5.868,5.868-5.844,15.382,0,21.226l104.034,104.004l-43.184,43.184C326.986,495.803,333.635,512,347,512h150 c8.291,0,15-6.709,15-15V347C512,333.699,495.874,326.947,486.396,336.393z"}))),o.exports.createElement("g",null,o.exports.createElement("g",null,o.exports.createElement("path",{d:"M236.454,172.808L132.421,68.789l43.184-43.184C185.014,16.197,178.365,0,165,0H15C6.709,0,0,6.709,0,15v150 c0,13.269,16.088,20.09,25.606,10.606l43.198-43.169l104.004,104.018c5.856,5.856,15.351,5.859,21.209,0.001l42.437-42.437 C242.286,188.187,242.334,178.688,236.454,172.808z"}))),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null),o.exports.createElement("g",null));const se=({comment:e})=>{const a=w(),r=d(y=>y.auth.user),s=d(y=>y.post),n=d(y=>y.comments),[l,m]=o.exports.useState(!1),[c,i]=o.exports.useState(!1),[A,E]=o.exports.useState(),[p,N]=o.exports.useState(null);let f=Te(e.created_at);const L=(y,D)=>{a(It({id:D,body:A})),i(!c),y.preventDefault()},x=y=>{a(Ot(y.id,!y.threadToggle))},u=y=>y.map((D,j)=>D.parent_comment===e.id&&t.createElement("div",{className:"nested-comment"},!D.threadToggle&&t.createElement("button",{onClick:()=>x(D),className:"replies-toggle"},t.createElement(kt,{className:"expand-thread-icon"}),"Expand Thread"),D.threadToggle&&t.createElement("div",{className:`${j} bar-and-comment`},t.createElement("div",{className:"bar-parent"},t.createElement("div",{onClick:()=>x(D),className:"bar"})),t.createElement(se,{key:j,comment:D})))),h=y=>{if(!r){N("You must log in to vote"),setTimeout(()=>N(null),4e3);return}a(Ut(r.id,e.id,y))};return o.exports.useEffect(()=>{E(e.body)},[c]),t.createElement("div",{className:"comment-thread"},t.createElement("div",{className:"comment"},t.createElement("div",{className:"comment-main-section"},p&&t.createElement("p",{className:"vote-error"},p),t.createElement("p",{className:"comment-metadata"},t.createElement(K,{size:"small",source:e.profile_picture}),t.createElement("span",{className:"user"},e.username),t.createElement("span",{className:"time-ago"},f)),t.createElement("div",{className:"comment-body"},r&&r.id===e.author_id&&c?t.createElement("form",{className:"edit-comment-form",onSubmit:y=>{L(y,e.id)}},t.createElement("textarea",{value:A,onChange:y=>E(y.target.value)}),t.createElement("div",{className:"save-and-cancel"},t.createElement("button",{type:"submit"},"Save"),t.createElement("button",{onClick:()=>i(!c)},"Cancel"))):t.createElement("p",{className:"comment-body-text"},C.decode(e.body))),t.createElement("div",{className:"comment-buttons"},t.createElement(te,{item:e,handleVoteClick:h}),r&&t.createElement("button",{className:"reply-button",onClick:()=>m(!l)},t.createElement(Qt,{className:"comment-icon"})," Reply"),r&&r.id===e.author_id&&t.createElement(t.Fragment,null,!c&&t.createElement("button",{className:"edit-button",onClick:()=>i(!c)},t.createElement(ye,{className:"edit-icon"})," Edit"),t.createElement("button",{className:"delete-button",onClick:()=>a(Pt(e.id))},t.createElement(Ce,{className:"delete-icon"})," Delete"))),l&&t.createElement(re,{post:s,parentComment:e.id,setToggleCommentReply:m,alwaysOpen:!1}))),u(n))};se.propTypes={comment:T.object};const Gt=()=>{const e=d(r=>r.comments),a=d(r=>r.auth.user);return t.createElement(O.div,{className:"comments-list",initial:{opacity:0},animate:{opacity:1}},e?e.map((r,s)=>!r.parent_comment&&t.createElement(se,{key:s,comment:r})):!a&&t.createElement("p",{className:"no-comments-prompt"}," ","It's quiet here,\xA0",t.createElement(S,{to:"/login"},"login")," or"," ",t.createElement(S,{to:"/register"},"register")," to leave a comment..."))};const fe=({actionText:e})=>t.createElement("div",{className:"log-in-prompt"},t.createElement("p",null,"Log in or register to ",e),t.createElement("div",{className:"log-in-prompt__buttons"},t.createElement(S,{to:"/login"},"Login"),t.createElement(S,{to:"/register"},"Register")));fe.propTypes={actionText:T.string};var Ft="data:image/png;base64,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",zt="data:image/png;base64,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";const jt=()=>{const e=w(),{postId:a}=Ee(),{width:r}=q(),s=d(p=>p.post),n=d(p=>p.theme),l=d(p=>p.comments),m=d(p=>p.loading),c=d(p=>p.currentSubreddit),i=d(p=>p.auth.user),[A,E]=o.exports.useState(!1);return o.exports.useEffect(()=>{e(pt(a,i?i.id:null)),e(Mt()),e(_t(a,i?i.id:null))},[e,a]),o.exports.useEffect(()=>{console.log("theme"),r<=767?E(!0):E(!1)},[r,n]),t.createElement(O.div,{className:"single-post-page  ",initial:{opacity:0},animate:{opacity:1}},A&&t.createElement("div",{className:"back-button-and-subreddit-select"},t.createElement(S,{to:c?`/r/${c.name}`:"/",className:"back-button"},t.createElement("img",{className:"back-icon",src:n?zt:Ft})),t.createElement(be,null)),m?t.createElement(we,null):s&&t.createElement("div",{className:"single-post-page-container"},t.createElement(ae,{post:s,single:!0}),i?s&&t.createElement(re,{parentComment:null,post:s,alwaysOpen:!0}):t.createElement(fe,{actionText:"comment"}),l.length>0&&t.createElement(Gt,null)))};const Vt=()=>{const[e,a]=o.exports.useState(""),[r,s]=o.exports.useState(""),n=w(),l=d(c=>c.auth.user),m=c=>{e!==""&&n(ft(l.id,e,r)),c.preventDefault()};return t.createElement("div",{className:"create-subreddit"},t.createElement(U,{title:"Create a new subreddit"}),t.createElement("form",{onSubmit:c=>m(c)},t.createElement("input",{onChange:c=>a(c.target.value),placeholder:"Subreddit name"}),t.createElement("textarea",{onChange:c=>s(c.target.value),placeholder:"Description (optional)"}),t.createElement("button",{disabled:e==="",className:e===""?"disabled":"",type:"submit"},"Submit")))};const Ht=()=>t.createElement("div",{className:"wrong-browser-view"},t.createElement("div",{className:"wrong-browser-container"},t.createElement("h1",null,"Oops!"),t.createElement("p",null,"It looks like you're using a browser that has disabled third-party cookies from cross-origin domains. This breaks this app's authentication, rendering it unusable. The only way around this is to purchase a yearly domain."),t.createElement("p",null,"Since this is a portfolio project (not a for-profit app), I ask you to view this on a non-webkit browser (like chrome or firefox on desktop) to ensure the optimal experience."),t.createElement("strong",null,"By the way, i'm sorry about this. Thanks in advance for checking out the project.")));const H=({subreddit:e})=>{const a=P();return t.createElement(S,{className:`subreddit-link ${a.location.pathname.replace("/r/","")===e.name?"current":""}`,to:`/r/${C.decode(e.name)}`},"r/",C.decode(e.name))};H.propTypes={subreddit:T.object};const Jt=()=>{const e=P(),a=w(),r=d(n=>n.subreddits),s=d(n=>n.auth.user);return o.exports.useEffect(()=>{a(wt())},[a]),t.createElement("aside",{className:"sidebar  "},!s&&t.createElement("p",{className:"no-user-error"}," ",t.createElement(S,{to:"/login"},"Sign in")," or"," ",t.createElement(S,{to:"/register"},"register")," to create new content"),t.createElement("div",{className:"sidebar-buttons"},t.createElement("div",{className:"post-and-link-buttons"},t.createElement(S,{to:`${s?"/new-post?type=text":"#"}`,className:`new-post-sidebar ${s?"":"disabled"}`},"New Post"),t.createElement(S,{to:`${s?"/new-post?type=link":"#"}`,className:`new-link-sidebar ${s?"":"disabled"}`},"New Link")),t.createElement(S,{to:`${s?"/subreddits/create":"#"}`,className:`create-subreddit ${s?"":"disabled"}`},"Create Subreddit")),r.length>0&&t.createElement("div",{className:"subreddit-lists"},t.createElement("h3",{className:"subreddit-list-label-main"},"Subreddits"),t.createElement(S,{className:`subreddit-link ${e.location.pathname==="/"?"current":""}`,to:"/"},"Home"),t.createElement("h3",{className:"subreddit-list-label"},"General"),r.filter(n=>n.user_id===1).map((n,l)=>t.createElement(H,{subreddit:n,key:l})),t.createElement("h3",{className:"subreddit-list-label"},"User Created"),r.filter(n=>n.user_id!==1).map((n,l)=>t.createElement(H,{subreddit:n,key:l}))))};var Wt="data:image/png;base64,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";const Yt=(e=[],a)=>{switch(a.type){case"REMOVE_ERROR":return e.filter(r=>r.itemIndex!==a.payload);default:{const{type:r,message:s}=a,n=/(.*)_(REQUEST|FAILURE)/.exec(r);if(!n)return e;const[,l,m]=n;return m==="FAILURE"&&e.push({itemIndex:e.length,requestName:l,message:s}),[...e]}}},Zt=e=>a=>{setTimeout(()=>a({type:"REMOVE_ERROR",payload:e}),4e3)};const xe=({error:e})=>{const a=w(),[r,s]=o.exports.useState(!0),n=()=>{setTimeout(()=>{s(!1)},5001)};return o.exports.useEffect(()=>{n()},[e]),o.exports.useEffect(()=>{r||a(Zt(e.itemIndex))},[r]),t.createElement(O.div,{className:"error-popup-item",animate:{opacity:r?1:0,x:r?0:"-100%"},transition:{ease:"easeOut",duration:.5},initial:{x:"-100%"}},t.createElement("img",{src:Wt,alt:"warning icon"}),t.createElement("p",{className:"error-message"},e.message))};xe.propTypes={error:T.object};const Kt=()=>{const e=d(a=>a.error);return t.createElement(ke,null,t.createElement("div",{className:"error-popup-list"},e.map((a,r)=>t.createElement(xe,{key:r,error:a}))))},R=Ge();function qt(){const e=ee(),a=d(l=>l.currentSubreddit),r=d(l=>l.theme),s=I(),n=["/login","/register"];return o.exports.useEffect(()=>{document.body.dataset.theme=r?"dark":"light"},[r]),(R==null?void 0:R.name)==="safari"||(R==null?void 0:R.name)==="ios"||(R==null?void 0:R.name)==="crios"?t.createElement(Ht,null):t.createElement("div",{className:"App"},t.createElement(U,{title:a?`r/${a.name}`:"Home"}),t.createElement(Xe,null,t.createElement(ut,null),t.createElement("main",null,t.createElement(Fe,null,t.createElement(B,{path:"/register"},t.createElement(at,null)),t.createElement(B,{path:"/login"},t.createElement(rt,null)),t.createElement(J,{path:"/subreddits/create"},e?t.createElement(V,{to:a?`/r/${a.name}?q=${e}`:`/q=${e}`}):t.createElement(Vt,null)),t.createElement(J,{path:"/new-post"},e?t.createElement(V,{to:a?`/r/${a.name}?q=${e}`:`/q=${e}`}):t.createElement(Lt,null)),t.createElement(B,{path:"/r/:name/:postId"},t.createElement(jt,null)),t.createElement(B,{path:"/r/:name"},t.createElement(de,null)),t.createElement(B,{path:"/"},t.createElement(de,null))),n.indexOf(s.pathname)<0&&t.createElement(Jt,null)),t.createElement(Kt,null),t.createElement(Et,null)))}function J(r){var s=r,{children:e}=s,a=ce(s,["children"]);console.log(a);let n=d(l=>l.auth.user);return t.createElement(B,v(g({},a),{render:({location:l})=>n?e:t.createElement(V,{to:{pathname:"/login",state:{from:l}}})}))}J.propTypes={children:T.object};const Xt=Z("authState")||{},$t=(e=Xt,a)=>{switch(a.type){case"REGISTER_REQUEST":return e;case"REGISTER_SUCCESS":return e;case"LOGIN_REQUEST":return e;case"LOGIN_SUCCESS":return v(g({},e),{user:a.payload});case"LOGOUT":return v(g({},e),{user:null});default:return e}},ea=(e=[],a)=>{switch(a.type){case"CREATE_SUBREDDIT_SUCCESS":return[...e,a.payload];case"GET_SUBREDDITS_SUCCESS":return a.payload;case"DELETE_SUBREDDIT_SUCCESS":return e.filter(r=>r.id!==a.payload);default:return e}},ta=(e=null,a)=>{switch(a.type){case"SET_CURRENT_SUBREDDIT_SUCCESS":return a.payload;default:return e}},aa=(e=[],a)=>{switch(a.type){case"GET_POSTS_SUCCESS":return a.payload;case"CREATE_POST_SUCCESS":return[...e,a.payload];case"GET_SUBREDDIT_POSTS_SUCCESS":return a.payload;case"DELETE_POST_SUCCESS":{const{id:r}=a.payload;return e.map(s=>s.id===r?v(g({},s),{title:"[DELETED]",body:"[DELETED]",username:"[DELETED]"}):s)}case"EDIT_POST":{const{id:r,updates:s}=a;if(e)return e.map(n=>n.id===r?v(g({},n),{body:s.body}):n);break}case"POST_VOTE_SUCCESS":{const{postId:r,value:s}=a.payload,n=l=>{switch(console.log(l),s){case 1:return l.has_voted===1?l.vote_count-1:l.has_voted===-1?l.vote_count+2:l.vote_count+1;case-1:return l.has_voted===-1?l.vote_count+1:l.has_voted===1?l.vote_count-2:l.vote_count-1;default:return l.vote_count}};return e.map(l=>l.id===r?v(g({},l),{vote_count:n(l),has_voted:l.has_voted===s?null:s,vote_value:l.has_voted}):l)}default:return e}},ra=(e=null,a)=>{switch(a.type){case"GET_POST_SUCCESS":return a.payload;case"SET_POST_SUCCESS":return a.payload;case"EDIT_POST":{const{updates:r}=a;return v(g({},e),{body:r.body})}case"SINGLEPOST_VOTE_SUCCESS":{const{value:r}=a.payload,s=n=>{switch(console.log(n),console.log(e),r){case 1:return n.has_voted===1?n.vote_count-1:n.has_voted===-1?n.vote_count+2:n.vote_count+1;case-1:return n.has_voted===-1?n.vote_count+1:n.has_voted===1?n.vote_count-2:n.vote_count-1;default:return n.vote_count}};return v(g({},e),{vote_count:s(e),has_voted:e.has_voted===r?null:r,vote_value:e.has_voted})}case"DELETE_POST_SUCCESS":return v(g({},e),{title:"[DELETED]",body:"[DELETED]",username:"[DELETED]",status:"[DELETED]"});default:return e}},sa=(e=!1,a)=>{switch(a.type){case"GET_POSTS_REQUEST":return e=!0;case"GET_POSTS_SUCCESS":return e=!1;case"GET_COMMENTS_REQUEST":return e=!0;case"GET_COMMENTS_SUCCESS":return e=!1;case"GET_POST_REQUEST":return e=!0;case"LOGIN_REQUEST":return e=!0;case"GET_POST_SUCCESS":return e=!1;default:return e}},na=(e=[],a)=>{switch(a.type){case"GET_COMMENTS_SUCCESS":return a.payload;case"ADD_COMMENT_SUCCESS":return[a.payload,...e];case"RESET_COMMENTS":return e=[];case"EDIT_COMMENT":{const{id:r,updates:s}=a;return e.map(n=>n.id===r?g(g({},n),s):n)}case"DELETE_COMMENT_SUCCESS":{const{id:r}=a.payload;return console.log(r),console.log(e.filter(s=>s.id!==r)),e.filter(s=>s.id!==r)}case"TOGGLE_COMMENT_THREAD":{const{id:r,threadToggle:s}=a.payload;return console.log(r,s),console.log(e.map(n=>n.id===r?v(g({},n),{threadToggle:s}):n)),e.map(n=>n.id===r?v(g({},n),{threadToggle:s}):n)}case"COMMENT_VOTE_SUCCESS":{const{commentId:r,value:s}=a.payload,n=l=>{switch(s){case 1:return l.has_voted===1?l.vote_count-1:l.has_voted===-1?l.vote_count+2:l.vote_count+1;case-1:return l.has_voted===-1?l.vote_count+1:l.has_voted===1?l.vote_count-2:l.vote_count-1;default:return l.vote_count}};return e.map(l=>l.id===r?v(g({},l),{vote_count:n(l),has_voted:l.has_voted===s?null:s,vote_value:l.has_voted}):l)}default:return e}},oa=[ze(Je),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({trace:!0})||pe],la=Z(),ca=je({auth:$t,subreddits:ea,currentSubreddit:ta,postList:aa,post:ra,error:Yt,loading:sa,theme:st,comments:na}),G=Ve(ca,la,pe(...oa));G.subscribe(He(()=>{me(G.getState().auth,"authState"),me(G.getState().theme,"themeState")},1e3));We.render(t.createElement(t.StrictMode,null,t.createElement(Ye,{store:G},t.createElement(Ze,{history:M},t.createElement(Ke,null,t.createElement(qt,null))))),document.getElementById("root"));
